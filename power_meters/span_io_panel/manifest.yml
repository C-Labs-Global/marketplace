blueprint_spec: device/1.0

display_name: SPAN.IO Smart Breaker Panel
description: Span Main Breaker
icon: enapter-power-meter

communication_module:
  product: ENP-VIRTUAL
  lua_file: firmware.lua

properties:
  vendor:
    type: string
    display_name: Vendor
  model:
    type: string
    display_name: Model
  ip_address:
    display_name: IP Address
    type: string

alerts:
  communication_failed:
    display_name: REST communication failed
    severity: warning

telemetry:
  status:
    display_name: Status
    type: string
    enum:
      - OPEN
      - CLOSED
  total_power:
    type: float
    unit: watt
    display_name: Total Power

command_groups:
  connection:
    display_name: Connection
  internals:
    display_name: Internals

commands:
  # Connection Config
  write_configuration:
    populate_values_command: read_configuration
    display_name: Configure Connection
    group: connection
    ui:
      icon: file-settings-outline
    arguments:
      ip_address:
        display_name: IP Address
        description: IP address of the Span Panel
        type: string
        required: true
  read_configuration:
    display_name: Read Connection Config
    group: internals
    ui:
      icon: file-settings-outline

.cloud:
  category: power_meters
  mobile_telemetry:
    - total_power
